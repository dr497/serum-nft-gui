(this["webpackJsonpserum-nft-gui"]=this["webpackJsonpserum-nft-gui"]||[]).push([[0],{260:function(e,t,n){e.exports=n.p+"static/media/logo-deep.04bd3c48.png"},269:function(e,t,n){e.exports=n(464)},274:function(e,t,n){},275:function(e,t,n){},279:function(e,t){},280:function(e,t){},314:function(e,t){},337:function(e,t,n){e.exports=n.p+"static/media/srm.0be67a89.gif"},338:function(e,t,n){e.exports=n.p+"static/media/satoshi-closeup.d69a9247.JPG"},339:function(e,t,n){e.exports=n.p+"static/media/satoshi-gb.4c8081a5.JPG"},340:function(e,t,n){e.exports=n.p+"static/media/satoshi-og.bb1a4781.gif"},341:function(e,t,n){e.exports=n.p+"static/media/satoshi-btc.1ee5a32c.gif"},342:function(e,t,n){e.exports=n.p+"static/media/satoshi-gb.fb33b42b.gif"},343:function(e,t,n){e.exports=n.p+"static/media/satoshi.8d8b2974.gif"},344:function(e,t,n){e.exports=n.p+"static/media/satoshi-closeup.ade7d873.gif"},345:function(e,t,n){e.exports=n.p+"static/media/satoshi-btc.b39177ef.JPG"},464:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(37),c=n.n(o),i=(n(274),n(275),n(12)),u=n.n(i),l=n(18),s=n(13),d=n(55),f=n(17),p=n(46),m=n.n(p);function b(e){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function h(e,t){return t?Math.floor(e*Math.pow(10,t))/Math.pow(10,t):e}function g(e,t){return t?Math.round(e*Math.pow(10,t))/Math.pow(10,t):e}function k(e){return isNaN(e)||Math.floor(e)===e?0:e.toString().split(".")[1].length||0}function y(e,t){var n=e.div(t).toNumber(),r=e.umod(t),a=r.gcd(t);return n+r.div(a).toNumber()/t.div(a).toNumber()}function E(e){return new m.a(10).pow(new m.a(e))}var O={};function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e)||t,a=Object(r.useState)(e+"\n"+n),o=Object(s.a)(a,2),c=o[1];Object(r.useEffect)((function(){return O[e]||(O[e]=[]),O[e].push(c),function(){O[e]=O[e].filter((function(e){return e!==c})),0===O[e].length&&delete O[e]}}),[e]);var i=Object(r.useCallback)((function(t){n!==t&&(null===t?localStorage.removeItem(e):localStorage.setItem(e,t),O[e].forEach((function(n){return n(e+"\n"+t)})))}),[n,e]);return[n,i]}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=w(e,JSON.stringify(t)),r=Object(s.a)(n,2),a=r[0],o=r[1];return[a&&JSON.parse(a),function(e){return o(JSON.stringify(e))}]}function j(e,t,n){if(!n&&Object.keys(e).length!==Object.keys(t).length)return!1;n=n||Object.keys(e);var r,a=Object(d.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(e[o]!==t[o])return!1}}catch(c){a.e(c)}finally{a.f()}return!0}var S=n(58),A=n(83),T=n(72),C=n(9),B=n.n(C),M=new Date,N=new Map,z=function e(t,n,r,a,o,c){Object(T.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.refreshInterval=void 0,this.refreshIntervalOnError=void 0,this.callback=void 0,this.cacheNullValues=!0,this.cacheKey=t,this.fn=n,this.refreshInterval=r,this.refreshIntervalOnError=a,this.callback=o,this.cacheNullValues=c},P=function(){function e(t,n,r){var a=this;Object(T.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.timeoutId=void 0,this.listeners=void 0,this.errors=void 0,this.cacheNullValues=!0,this.refresh=Object(l.a)(u.a.mark((function e(){var t,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.timeoutId&&(clearTimeout(a.timeoutId),a.timeoutId=null),!a.stopped){e.next=3;break}return e.abrupt("return");case 3:return t=!1,e.prev=4,e.next=7,a.fn();case 7:if(n=e.sent,a.cacheNullValues||null!==n){e.next=14;break}return console.log("Not caching null value for ".concat(a.cacheKey)),a.errors=0,e.abrupt("return",n);case 14:return N.set(a.cacheKey,n),a.errors=0,a.notifyListeners(),e.abrupt("return",n);case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(4),++a.errors,console.warn(e.t0),t=!0;case 25:return e.prev=25,a.timeoutId||a.stopped||(r=a.refreshInterval,t&&a.refreshIntervalOnError&&a.refreshIntervalOnError>0&&(r=a.refreshIntervalOnError),a.errors>0&&(r=Math.min(1e3*Math.pow(2,a.errors-1),6e4)),(o=+new Date-+M)<5e3&&(r+=5e3-o/2),"hidden"===document.visibilityState?r=6e4:document.hasFocus()||(r*=1.5),r*=.8+.4*Math.random(),a.timeoutId=setTimeout(a.refresh,r)),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,20,25,28]])}))),this.cacheKey=t,this.fn=n,this.timeoutId=null,this.listeners=new Set,this.errors=0,this.cacheNullValues=r}return Object(A.a)(e,[{key:"addListener",value:function(e){var t=this.refreshInterval;this.listeners.add(e),this.refreshInterval<t&&this.refresh()}},{key:"removeListener",value:function(e){B()(this.listeners.delete(e)),this.stopped&&this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"notifyListeners",value:function(){this.listeners.forEach((function(e){return e.callback()}))}},{key:"refreshInterval",get:function(){return Math.min.apply(Math,Object(S.a)(Object(S.a)(this.listeners).map((function(e){return e.refreshInterval}))))}},{key:"refreshIntervalOnError",get:function(){var e=Object(S.a)(this.listeners).map((function(e){return e.refreshIntervalOnError})).filter((function(e){return null!==e}));return 0===e.length?null:Math.min.apply(Math,Object(S.a)(e))}},{key:"stopped",get:function(){return 0===this.listeners.size}}]),e}(),I=new(function(){function e(){Object(T.a)(this,e),this.loops=new Map}return Object(A.a)(e,[{key:"addListener",value:function(e){this.loops.has(e.cacheKey)||this.loops.set(e.cacheKey,new P(e.cacheKey,e.fn,e.cacheNullValues)),this.loops.get(e.cacheKey).addListener(e)}},{key:"removeListener",value:function(e){var t=this.loops.get(e.cacheKey);t.removeListener(e),t.stopped&&this.loops.delete(e.cacheKey)}},{key:"refresh",value:function(e){this.loops.has(e)&&this.loops.get(e).refresh()}},{key:"refreshAll",value:function(){return Promise.all(Object(S.a)(this.loops.values()).map((function(e){return e.refresh()})))}}]),e}());function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.refreshInterval,o=void 0===a?6e4:a,c=n.refreshIntervalOnError,i=void 0===c?null:c,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=Object(r.useReducer)((function(e){return e+1}),0),d=Object(s.a)(l,2),f=d[1];if(Object(r.useEffect)((function(){if(!t)return function(){};var n=new z(t,e,o,i,f,u);return I.addListener(n),function(){return I.removeListener(n)}}),[t,o]),!t)return[null,!1];var p=N.has(t),m=p?N.get(t):void 0;return[m,p]}function F(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&N.delete(e);var n=I.loops.get(e);n&&(n.refresh(),t&&n.notifyListeners())}var K=n(59),q=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com",custom:!1},{name:"localnet",endpoint:"http://127.0.0.1:8899",custom:!1}],_=new Map,L=a.a.createContext(null);function D(e){var t=e.children,n=x("connectionEndpts",q[0].endpoint),o=Object(s.a)(n,2),c=o[0],i=o[1],u=x("customConnectionEndpoints",[]),l=Object(s.a)(u,2),d=l[0],p=l[1],m=q.concat(d),b=Object(r.useMemo)((function(){return new f.b(c,"recent")}),[c]),v=Object(r.useMemo)((function(){return new f.b(c,"recent")}),[c]);return Object(r.useEffect)((function(){var e=b.onAccountChange((new f.a).publicKey,(function(){}));return function(){b.removeAccountChangeListener(e)}}),[b]),Object(r.useEffect)((function(){var e=b.onSlotChange((function(){return null}));return function(){b.removeSlotChangeListener(e)}}),[b]),Object(r.useEffect)((function(){var e=v.onAccountChange((new f.a).publicKey,(function(){}));return function(){v.removeAccountChangeListener(e)}}),[v]),Object(r.useEffect)((function(){var e=v.onSlotChange((function(){return null}));return function(){v.removeSlotChangeListener(e)}}),[v]),a.a.createElement(L.Provider,{value:{endpoint:c,setEndpoint:i,connection:b,sendConnection:v,availableEndpoints:m,setCustomEndpoints:p}},t)}function U(){var e=Object(r.useContext)(L);if(!e)throw new Error("Missing connection context");return e.connection}function W(){var e=Object(r.useContext)(L);if(!e)throw new Error("Missing connection context");return e.sendConnection}function H(){var e=Object(r.useContext)(L);if(!e)throw new Error("Missing connection context");return{endpoint:e.endpoint,endpointInfo:e.availableEndpoints.find((function(t){return t.endpoint===e.endpoint})),setEndpoint:e.setEndpoint,availableEndpoints:e.availableEndpoints,setCustomEndpoints:e.setCustomEndpoints}}function G(e){var t=U(),n=Object(K.a)(t,null===e||void 0===e?void 0:e.toBase58()),a=R(Object(l.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e?t.getAccountInfo(e):null);case 1:case"end":return n.stop()}}),n)}))),n,{refreshInterval:6e4}),o=Object(s.a)(a,2),c=o[0],i=o[1];return Object(r.useEffect)((function(){if(e){if(_.has(n)){++_.get(n).count}else{var r=null,a=t.onAccountChange(e,(function(e){e.data&&(r&&r.equals(e.data)||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.initializeOnly,a=void 0!==r&&r;if(!a||!N.has(e)){N.set(e,t);var o=I.loops.get(e);o&&o.notifyListeners()}}(n,e),r=e.data)}));_.set(n,{count:1,subscriptionId:a})}return function(){var e=_.get(n);e.count-1<=0?(t.removeAccountChangeListener(e.subscriptionId),_.delete(n)):--e.count}}}),[n]),[c,i]}function J(e){var t=G(e),n=Object(s.a)(t,1)[0];return n&&n.data}var V=n(43),X=n(45),Y=n(233),Z=n(267),Q=n(203),$=n(110);function ee(e){var t=e.external,n=void 0!==t&&t,r=Object(Q.a)(e,["external"]),o=r.to,c=r.children,i=Object(Q.a)(r,["to","children"]);return n?a.a.createElement("a",Object.assign({href:o,target:"_blank",rel:"noopener noreferrer"},i),c):a.a.createElement($.b,Object.assign({to:o},i),c)}function te(e){var t=e.message,n=e.description,r=e.txid,o=e.type,c=void 0===o?"info":o,i=e.placement,u=void 0===i?"bottomLeft":i;r&&(n=a.a.createElement(ee,{external:!0,to:"https://explorer.solana.com/tx/"+r,style:{color:"#0000ff"}},"View transaction ",r.slice(0,8),"...",r.slice(r.length-8))),Z.a[c]({message:a.a.createElement("span",{style:{color:"black"}},t),description:a.a.createElement("span",{style:{color:"black",opacity:.5}},n),placement:u,style:{backgroundColor:"white"}})}var ne=[{name:"sollet.io",url:"https://www.sollet.io"}],re=a.a.createContext(null);function ae(e){var t,n,o,c=e.children,i=H().endpoint,u=x("walletProvider","https://www.sollet.io"),l=Object(s.a)(u,2),d=l[0],f=l[1];o=d||"https://www.sollet.io";var p=Object(r.useMemo)((function(){return new Y.a(o,i)}),[o,i]),m=Object(r.useState)(!1),b=Object(s.a)(m,2),v=b[0],h=b[1];return Object(r.useEffect)((function(){return console.log("trying to connect"),p.on("connect",(function(){console.log("connected"),h(!0);var e=p.publicKey.toBase58();te({message:"Wallet update",description:"Connected to wallet "+(e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e)})})),p.on("disconnect",(function(){h(!1),te({message:"Wallet update",description:"Disconnected from wallet"})})),function(){p.disconnect(),h(!1)}}),[p]),a.a.createElement(re.Provider,{value:{wallet:p,connected:v,providerUrl:o,setProviderUrl:f,providerName:null!==(t=null===(n=ne.find((function(e){return e.url===o})))||void 0===n?void 0:n.name)&&void 0!==t?t:o}},c)}function oe(){var e=Object(r.useContext)(re);if(!e)throw new Error("Missing wallet context");return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}var ce=n(6),ie=n(33),ue=n.n(ie),le=n(81),se=n(70),de=n(3);function fe(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connection,r=t.wallet,a=t.mintPublicKey,o=new f.a,e.t0=f.d,e.t1=r.publicKey,e.t2=o.publicKey,e.next=7,n.getMinimumBalanceForRentExemption(165);case 7:return e.t3=e.sent,e.t4=X.TokenInstructions.TOKEN_PROGRAM_ID,e.t5={fromPubkey:e.t1,newAccountPubkey:e.t2,lamports:e.t3,space:165,programId:e.t4},(c=e.t0.createAccount.call(e.t0,e.t5)).add(X.TokenInstructions.initializeAccount({account:o.publicKey,mint:a,owner:r.publicKey})),e.abrupt("return",{transaction:c,signer:o,newAccountPubkey:o.publicKey});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){return be.apply(this,arguments)}function be(){return(be=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,c,i,l,s,d,p,m,b,v,h,g,k,y,E,O,w;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.market,r=t.openOrders,a=t.connection,o=t.wallet,c=t.baseCurrencyAccount,i=t.quoteCurrencyAccount,n&&o&&a&&r&&(c||i)){e.next=4;break}return te({message:"Not connected"}),e.abrupt("return");case 4:if(d=null===c||void 0===c?void 0:c.pubkey,p=null===i||void 0===i?void 0:i.pubkey,d){e.next=13;break}return e.next=9,fe({connection:a,wallet:o,mintPublicKey:n.baseMintAddress});case 9:m=e.sent,d=null===m||void 0===m?void 0:m.newAccountPubkey,l=null===m||void 0===m?void 0:m.transaction,s=null===m||void 0===m?void 0:m.signer;case 13:if(p){e.next=20;break}return e.next=16,fe({connection:a,wallet:o,mintPublicKey:n.quoteMintAddress});case 16:b=e.sent,p=null===b||void 0===b?void 0:b.newAccountPubkey,l=null===b||void 0===b?void 0:b.transaction,s=null===b||void 0===b?void 0:b.signer;case 20:return v=null,n.supportsReferralFees&&(h=X.TOKEN_MINTS.find((function(e){return"USDT"===e.name})),g=X.TOKEN_MINTS.find((function(e){return"USDC"===e.name})),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_USDT_REFERRAL_FEES_ADDRESS&&h&&n.quoteMintAddress.equals(h.address)?v=new f.c(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_USDT_REFERRAL_FEES_ADDRESS):Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_USDC_REFERRAL_FEES_ADDRESS&&g&&n.quoteMintAddress.equals(g.address)&&(v=new f.c(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_USDC_REFERRAL_FEES_ADDRESS))),e.next=24,n.makeSettleFundsTransaction(a,r,d,p,v);case 24:return k=e.sent,y=k.transaction,E=k.signers,O=ze([l,y]),w=s?[].concat(Object(S.a)(E),[s]):E,e.next=31,je({transaction:O,signers:w,wallet:o,connection:a,sendingMessage:"Settling funds..."});case 31:return e.abrupt("return",e.sent);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return he.apply(this,arguments)}function he(){return(he=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,c,i,s,d,f,p,m,b,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.connection,r=t.wallet,a=t.tokenAccounts,o=t.markets,c=t.selectedTokenAccounts,o&&r&&n&&a){e.next=3;break}return e.abrupt("return");case 3:return i=[],o.reduce((function(e,t){return e.push(t._programId),e}),[]).forEach((function(e){i.find((function(t){return t.equals(e)}))||i.push(e)})),s=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.OpenOrders.findForOwner(n,r.publicKey,t);case 2:return a=e.sent,e.abrupt("return",a.filter((function(e){return e.baseTokenFree.toNumber()||e.quoteTokenFree.toNumber()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=8,Promise.all(i.map((function(e){return s(e)})));case 8:return d=e.sent,f=d.reduce((function(e,t){return e.concat(t)}),[]),e.next=12,Promise.all(f.map((function(e){var t,r,i=o.find((function(t){var n,r;return null===(n=t._decoded)||void 0===n||null===(r=n.ownAddress)||void 0===r?void 0:r.equals(e.market)})),u=null===i||void 0===i?void 0:i.baseMintAddress,l=null===i||void 0===i?void 0:i.quoteMintAddress,s=null===(t=bt(a,u,u&&c&&c[u.toBase58()]))||void 0===t?void 0:t.pubkey,d=null===(r=bt(a,l,l&&c&&c[l.toBase58()]))||void 0===r?void 0:r.pubkey;return s&&d?i&&i.makeSettleFundsTransaction(n,e,s,d):null})));case 12:if((p=e.sent.filter((function(e){return!!e})))&&0!==p.length){e.next=15;break}return e.abrupt("return");case 15:return m=p.slice(0,4).map((function(e){return e.transaction})),b=[],p.reduce((function(e,t){return e.concat(t.signers)}),[]).forEach((function(e){b.find((function(t){return t.constructor.name===e.constructor.name&&("PublicKey"===t.constructor.name?t.equals(e):t.publicKey.equals(e.publicKey))}))||b.push(e)})),v=ze(m),e.next=21,je({transaction:v,signers:b,wallet:r,connection:n});case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ye(Object(V.a)(Object(V.a)({},t),{},{orders:[t.order]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.market,r=t.wallet,a=t.connection,o=t.orders,c=n.makeMatchOrdersTransaction(5),o.forEach((function(e){c.add(n.makeCancelOrderInstruction(a,r.publicKey,e))})),c.add(n.makeMatchOrdersTransaction(5)),e.next=6,je({transaction:c,wallet:r,connection:a,sendingMessage:"Sending cancel..."});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return we.apply(this,arguments)}function we(){return(we=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,c,i,l,s,d,f,p,m,b,v,h,g,y,E,O,w,x;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.side,o=t.price,c=t.size,i=t.orderType,l=t.market,s=t.connection,d=t.wallet,f=t.baseCurrencyAccount,p=t.quoteCurrencyAccount,m=(null===l||void 0===l||null===(n=l.minOrderSize)||void 0===n?void 0:n.toFixed(k(l.minOrderSize)))||(null===l||void 0===l?void 0:l.minOrderSize),b=(null===l||void 0===l||null===(r=l.tickSize)||void 0===r?void 0:r.toFixed(k(l.tickSize)))||(null===l||void 0===l?void 0:l.tickSize),v=function(e,t){return Math.abs(e/t%1)<1e-5||Math.abs(e/t%1-1)<1e-5},!isNaN(o)){e.next=7;break}return te({message:"Invalid price",type:"error"}),e.abrupt("return");case 7:if(!isNaN(c)){e.next=10;break}return te({message:"Invalid size",type:"error"}),e.abrupt("return");case 10:if(d&&d.publicKey){e.next=13;break}return te({message:"Connect wallet",type:"error"}),e.abrupt("return");case 13:if(l){e.next=16;break}return te({message:"Invalid  market",type:"error"}),e.abrupt("return");case 16:if(v(c,l.minOrderSize)){e.next=19;break}return te({message:"Size must be an increment of ".concat(m),type:"error"}),e.abrupt("return");case 19:if(!(c<l.minOrderSize)){e.next=22;break}return te({message:"Size too small",type:"error"}),e.abrupt("return");case 22:if(v(o,l.tickSize)){e.next=25;break}return te({message:"Price must be an increment of ".concat(b),type:"error"}),e.abrupt("return");case 25:if(!(o<l.tickSize)){e.next=28;break}return te({message:"Price under tick size",type:"error"}),e.abrupt("return");case 28:if(h=d.publicKey,g="sell"===a?f:p){e.next=33;break}return te({message:"Need an SPL token account for cost currency",type:"error"}),e.abrupt("return");case 33:return y={owner:h,payer:g,side:a,price:o,size:c,orderType:i},console.log(y),E=l.makeMatchOrdersTransaction(5),e.next=38,l.makePlaceOrderTransaction(s,y,1e4,1e4);case 38:return O=e.sent,w=O.transaction,x=O.signers,E.add(w),E.add(l.makeMatchOrdersTransaction(5)),e.next=45,je({transaction:E,wallet:d,connection:s,signers:x,sendingMessage:"Sending order..."});case 45:return e.abrupt("return",e.sent);case 46:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xe=function(){return(new Date).getTime()/1e3};function je(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,c,i,l,s,d,f,p,m,b,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,r=t.wallet,a=t.signers,o=void 0===a?[r.publicKey]:a,c=t.connection,i=t.sendingMessage,l=void 0===i?"Sending transaction...":i,s=t.sentMessage,d=void 0===s?"Transaction sent":s,f=t.successMessage,p=void 0===f?"Transaction confirmed":f,m=t.timeout,b=void 0===m?15e3:m,e.next=3,Ae({transaction:n,wallet:r,signers:o,connection:c});case 3:return v=e.sent,e.next=6,Ce({signedTransaction:v,connection:c,sendingMessage:l,sentMessage:d,successMessage:p,timeout:b});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,r=t.wallet,a=t.signers,o=void 0===a?[r.publicKey]:a,c=t.connection,e.next=3,c.getRecentBlockhash("max");case 3:return n.recentBlockhash=e.sent.blockhash,n.signPartial.apply(n,Object(S.a)(o)),e.next=7,r.signTransaction(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return Be.apply(this,arguments)}function Be(){return(Be=Object(l.a)(u.a.mark((function e(t){var n,r,a,o,c,i,s,d,f,p,m,v,h,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.sendingMessage,o=void 0===a?"Sending transaction...":a,c=t.sentMessage,i=void 0===c?"Transaction sent":c,s=t.successMessage,d=void 0===s?"Transaction confirmed":s,f=t.timeout,p=void 0===f?15e3:f,m=n.serialize(),v=xe(),te({message:o}),e.next=6,r.sendRawTransaction(m,{skipPreflight:!0});case 6:return h=e.sent,te({message:i,type:"success",txid:h}),console.log("Started awaiting confirmation for",h),g=!1,Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g||!(xe()-v<p)){e.next=6;break}return r.sendRawTransaction(m,{skipPreflight:!0}),e.next=4,b(300);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=11,e.next=14,Me(h,p,r);case 14:e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(11),!e.t0.timeout){e.next=20;break}throw new Error("Timed out awaiting confirmation on transaction");case 20:throw new Error("Transaction failed");case 21:return e.prev=21,g=!0,e.finish(21);case 24:return te({message:d,type:"success",txid:h}),console.log("Latency",h,xe()-v),e.abrupt("return",h);case 27:case"end":return e.stop()}}),e,null,[[11,16,21,24]])})))).apply(this,arguments)}function Me(e,t,n){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(l.a)(u.a.mark((function e(t,n,r){var a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.next=3,new Promise((function(e,o){Object(l.a)(u.a.mark((function c(){return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:setTimeout((function(){a||(a=!0,console.log("Timed out for txid",t),o({timeout:!0}))}),n);try{r.onSignature(t,(function(n){console.log("WS confirmed",t,n),a=!0,n.err?o(n.err):e(n)}),"recent"),console.log("Set up WS connection",t)}catch(i){a=!0,console.log("WS error in setup",t,i)}case 2:if(a){c.next=8;break}return Object(l.a)(u.a.mark((function n(){var c,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.getSignatureStatuses([t]);case 3:c=n.sent,i=c&&c.value[0],a||(i?i.err?(console.log("REST error for",t,i),a=!0,o(i.err)):i.confirmations?(console.log("REST confirmation for",t,i),a=!0,e(i)):console.log("REST no confirmations for",t,i):console.log("REST null result for",t,i)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a||console.log("REST connection error: txid",t,n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))(),c.next=6,b(300);case 6:c.next=2;break;case 8:case"end":return c.stop()}}),c)})))()}));case 3:return o=e.sent,a=!0,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e){var t=new f.e;return e.filter((function(e){return void 0!==e})).forEach((function(e){t.add(e)})),t}var Pe,Ie=Object(de.a)({executable:"boolean",owner:"string",lamports:"number",data:"any",rentEpoch:"number?"}),Re=(Pe=de.a.array([de.a.union(["null",Ie])]),function(e){var t=de.a.literal("2.0");return de.a.union([Object(de.a)({jsonrpc:t,id:"string",error:"any"}),Object(de.a)({jsonrpc:t,id:"string",error:"null?",result:e})])}({context:Object(de.a)({slot:"number"}),value:Pe}));function Fe(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(l.a)(u.a.mark((function e(t,n){var r,a,o,c,i,l,s,p,m,b,v,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[n.map((function(e){return e.toBase58()})),{commitment:"recent"}],e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(a=e.sent,!(o=Re(a)).error){e.next=7;break}throw new Error("failed to get info about accounts "+n.map((function(e){return e.toBase58()})).join(", ")+": "+o.error.message);case 7:B()("undefined"!==typeof o.result),c=[],i=Object(d.a)(o.result.value);try{for(i.s();!(l=i.n()).done;)s=l.value,p=null,o.result.value&&(m=s.executable,b=s.owner,v=s.lamports,h=s.data,B()("base64"===h[1]),p={executable:m,owner:new f.c(b),lamports:v,data:se.Buffer.from(h[0],"base64")}),c.push(p)}catch(u){i.e(u)}finally{i.f()}return e.abrupt("return",{context:{slot:o.result.context.slot},value:Object.fromEntries(c.map((function(e,t){return[n[t].toBase58(),e]})))});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe=ce.struct([ce.blob(32,"mint"),ce.blob(32,"owner"),ce.nu64("amount"),ce.blob(93)]),_e=ce.struct([ce.blob(44),ce.u8("decimals"),ce.u8("initialized"),ce.blob(36)]);function Le(e){var t=qe.decode(e),n=t.mint,r=t.owner,a=t.amount;return{mint:new f.c(n),owner:new f.c(r),amount:a}}function De(e){var t=_e.decode(e);return{decimals:t.decimals,initialized:t.initialized}}function Ue(e){return[{memcmp:{offset:qe.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:qe.span}]}var We=new f.c("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function He(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ue(n),e.next=3,t._rpcRequest("getProgramAccounts",[We.toBase58(),{commitment:t.commitment,filters:r}]);case 3:if(!(a=e.sent).error){e.next=6;break}throw new Error("failed to get token accounts owned by "+n.toBase58()+": "+a.error.message);case 6:return e.abrupt("return",a.result.map((function(e){var t=e.pubkey,n=e.account,r=n.data,a=n.executable,o=n.owner,c=n.lamports;return{publicKey:new f.c(t),accountInfo:{data:ue.a.decode(r),executable:a,owner:new f.c(o),lamports:c}}})).filter((function(e){var t=e.accountInfo;return r.every((function(e){if(e.dataSize)return t.data.length===e.dataSize;if(e.memcmp){var n=ue.a.decode(e.memcmp.bytes);return t.data.slice(e.memcmp.offset,e.memcmp.offset+n.length).equals(n)}return!1}))})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(l.a)(u.a.mark((function e(t,n){var r,a,o,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([He(t,n),t.getAccountInfo(n)]);case 2:return r=e.sent,a=Object(s.a)(r,2),o=a[0],c=a[1],i=o.map((function(e){var t=e.publicKey,n=e.accountInfo;return{pubkey:t,account:n,effectiveMint:Le(n.data).mint}})),e.abrupt("return",i.concat({pubkey:n,account:c,effectiveMint:le.WRAPPED_SOL_MINT}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(){var e=U(),t=it().customMarkets,n=mt(),r=Object(s.a)(n,1)[0],a=et(t),o=Object(s.a)(a,1)[0],c=(r||[]).map((function(e){return e.effectiveMint})).concat((o||[]).map((function(e){return e.market.baseMintAddress}))).concat((o||[]).map((function(e){return e.market.quoteMintAddress}))),i=Object(S.a)(new Set(c.map((function(e){return e.toBase58()})))).map((function(e){return new f.c(e)}));return R(function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fe(e,i);case 2:return n=t.sent,t.abrupt("return",Object.fromEntries(Object.entries(n.value).map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return[n,r&&De(r.data)]}))));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Object(K.a)("getAllMintInfo",e,(r||[]).length,(o||[]).length),{refreshInterval:5e6})}var Ye=function(){function e(){Object(T.a)(this,e)}return Object(A.a)(e,null,[{key:"get",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.URL+t);case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r.success?r.data:null);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error fetching from Bonfida API ".concat(t,": ").concat(e.t0));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentTrades",value:function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("trades/address/".concat(n)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();Ye.URL="https://serum-api.bonfida.com/";var Ze=function e(t,n,r,a,o,c){Object(T.a)(this,e),this.img=void 0,this.name=void 0,this.supply=void 0,this.mintAddress=void 0,this.marketAddress=void 0,this.sold=void 0,this.img=t,this.name=n,this.supply=r,this.mintAddress=a,this.marketAddress=o,this.sold=c},Qe=[new Ze(n(337),"LSD",1,new f.c("AcstFzGGawvvdVhYV9bftr7fmBHbePUjhv53YK1W3dZo"),new f.c("BdU5UYU8AU9iTVJXF6Sxc63M6XY4XWqZpdq2PigoqA92"),!1),new Ze(n(338),"Satoshi Closeup",10,new f.c("2gn1PJdMAU92SU5inLSp4Xp16ZC5iLF6ScEi7UBvp8ZD"),new f.c("7CGbje815jANonTXSBsdP7nkRLwy3ShLLvZFZRjtU7g2"),!1),new Ze(n(339),"Satoshi GB",10,new f.c("7mhZHtPL4GFkquQR4Y6h34Q8hNkQvGc1FaNtyE43NvUR"),new f.c("EHKqPgFnWHzUvgqzhroSeEDp4mD2em2RasxMmTPHDP6x"),!1),new Ze(n(340),"Satoshi OG",10,new f.c("8RoKfLx5RCscbtVh8kYb81TF7ngFJ38RPomXtUREKsT2"),new f.c("4uedKfwhVWreNYeQwzfd3nXSxR8A3muGpYdTxm88U7TX"),!1),new Ze(n(341),"Satoshi BTC",10,new f.c("9rw5hyDngBQ3yDsCRHqgzGHERpU2zaLh1BXBUjree48J"),new f.c("4H9oaHZ5pqtyEiKdcySFJnzNrWdXiG2H8HZG8fwx3kGM"),!1),new Ze(n(342),"Satoshi GB",10,new f.c("AiD7J6D5Hny5DJB1MrYBc2ePQqy2Yh4NoxWwYfR7PzxH"),new f.c("5W39A7d5iqHzh7oUHyu37HBN2nx7Ptg4yrSvgz1A8sq9"),!1),new Ze(n(343),"Satoshi",10,new f.c("bxiA13fpU1utDmYuUvxvyMT8odew5FEm96MRv7ij3eb"),new f.c("GXS6UKiTewG6FxwmwzkBKLRGyXfhZ5sbHwUcJZBZXrVT"),!1),new Ze(n(344),"Satoshi Closeup",10,new f.c("GoC24kpj6TkvjzspXrjSJC2CVb5zMWhLyRcHJh9yKjRF"),new f.c("AfuXKRbioPV9WkxiCJvVwgCVY3Y5D2dHhr2NMUaKoXiD"),!1),new Ze(n(345),"Satoshi BTC",10,new f.c("oCUduD44ETuZ65bpWdPzPDSnAdreg1sJrugfwyFZVHV"),new f.c("5rfx5u8aPY4MiSAvUxAqDFFhGgLGb8Luy1DQJVPcTt3e"),!1)],$e=[];function et(e){var t=U();return R(function(){var n=Object(l.a)(u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(Ot(e).map(function(){var e=Object(l.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.Market.load(t,n.address,{},n.programId);case 3:return r=e.sent,e.abrupt("return",{market:r,marketName:n.name,programId:n.programId});case 7:return e.prev=7,e.t0=e.catch(0),te({message:"Error loading all market",description:e.t0.message,type:"error"}),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=n.sent,n.abrupt("return",r.filter((function(e){return!!e})));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Object(K.a)("getAllMarkets",e.length,t),{refreshInterval:nt})}Qe.forEach((function(e){$e.push({name:e.name+"/SRM",address:e.marketAddress,programId:new f.c("EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"),deprecated:!1})}));var tt=a.a.createContext(null),nt=5e6,rt=$e.find((function(e){var t=e.name,n=e.deprecated;return"SRM/USDT"===t&&!n}));function at(e,t){var n,r;if(!e)return{};var a=Ot(t).find((function(t){return t.address.equals(e.address)})),o=(null===e||void 0===e?void 0:e.baseMintAddress)&&(null===(n=X.TOKEN_MINTS.find((function(t){return t.address.equals(e.baseMintAddress)})))||void 0===n?void 0:n.name)||(null===a||void 0===a?void 0:a.baseLabel)&&"".concat(null===a||void 0===a?void 0:a.baseLabel,"*")||"UNKNOWN",c=(null===e||void 0===e?void 0:e.quoteMintAddress)&&(null===(r=X.TOKEN_MINTS.find((function(t){return t.address.equals(e.quoteMintAddress)})))||void 0===r?void 0:r.name)||(null===a||void 0===a?void 0:a.quoteLabel)&&"".concat(null===a||void 0===a?void 0:a.quoteLabel,"*")||"UNKNOWN";return Object(V.a)(Object(V.a)({},a),{},{marketName:null===a||void 0===a?void 0:a.name,baseCurrency:o,quoteCurrency:c,marketInfo:a})}function ot(e){var t=e.children,n=x("marketAddress",null===rt||void 0===rt?void 0:rt.address.toBase58()),o=Object(s.a)(n,2),c=o[0],i=o[1],u=x("customMarkets",[]),l=Object(s.a)(u,2),d=l[0],p=l[1],m=c&&new f.c(c),b=U(),v=Ot(d),h=m&&v.find((function(e){return e.address.equals(m)}));Object(r.useEffect)((function(){h&&h.deprecated&&(console.log("Switching markets from deprecated",h),rt&&i(rt.address.toBase58()))}),[]);var g=Object(r.useState)(),k=Object(s.a)(g,2),y=k[0],E=k[1];return Object(r.useEffect)((function(){var e;y&&h&&(null===(e=y._decoded.ownAddress)||void 0===e?void 0:e.equals(null===h||void 0===h?void 0:h.address))||(E(null),h&&h.address?X.Market.load(b,h.address,{},h.programId).then(E).catch((function(e){return te({message:"Error loading market",description:e.message,type:"error"})})):te({message:"Error loading market",description:"Please select a market from the dropdown",type:"error"}))}),[b,h]),a.a.createElement(tt.Provider,{value:Object(V.a)(Object(V.a)({market:y},at(y,d)),{},{setMarketAddress:i,customMarkets:d,setCustomMarkets:p})},t)}function ct(){var e=x("selectedTokenAccounts",{}),t=Object(s.a)(e,2);return[t[0],t[1]]}function it(){var e=Object(r.useContext)(tt);if(!e)throw new Error("Missing market context");return e}function ut(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1],o=dt(),c=Object(s.a)(o,1)[0],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=lt(e);if(!t)return null;return t.filter((function(e){return e.eventFlags.maker})).map((function(e){return Object(V.a)(Object(V.a)({},e),{},{side:"buy"===e.side?"sell":"buy"})}))}();return Object(r.useEffect)((function(){var e,t,n=(null===c||void 0===c||null===(e=c.bids)||void 0===e?void 0:e.length)>0&&Number(c.bids[0][0]),r=(null===c||void 0===c||null===(t=c.asks)||void 0===t?void 0:t.length)>0&&Number(c.asks[0][0]),o=i&&i.length>0&&i[0].price,u=n&&r?o?[n,r,o].sort((function(e,t){return e-t}))[1]:(n+r)/2:null;a(u)}),[c,i]),n}function lt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=it(),n=t.market,r=U();function a(){return o.apply(this,arguments)}function o(){return(o=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&r){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,n.loadFills(r,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var c=R(a,Object(K.a)("getUnfilteredTrades",n,r),{refreshInterval:5e3}),i=Object(s.a)(c,1),d=i[0];return d}function st(){var e=it().market,t=J(e&&e._decoded.bids),n=J(e&&e._decoded.asks);return{bidOrderbook:e&&t?X.Orderbook.decode(e,t):null,askOrderbook:e&&n?X.Orderbook.decode(e,n):null}}function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=st(),n=t.bidOrderbook,r=t.askOrderbook,a=it(),o=a.market,c=n&&o?n.getL2(e).map((function(e){var t=Object(s.a)(e,2);return[t[0],t[1]]})):[],i=r&&o?r.getL2(e).map((function(e){var t=Object(s.a)(e,2);return[t[0],t[1]]})):[];return[{bids:c,asks:i},!!c||!!i]}function ft(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=it(),n=t.market,r=oe(),a=r.connected,o=r.wallet,c=U();function i(){return s.apply(this,arguments)}function s(){return(s=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",null);case 2:if(n){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,n.findOpenOrdersAccountsForOwner(c,o.publicKey);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return R(i,Object(K.a)("getOpenOrdersAccounts",o,n,a),{refreshInterval:e?1e3:5e3})}function pt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=ft(e),n=Object(s.a)(t,1),r=n[0];return r?r[0]:null}function mt(){var e=oe(),t=e.connected,n=e.wallet,r=U();function a(){return(a=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Je(r,n.publicKey);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return R((function(){return a.apply(this,arguments)}),Object(K.a)("getTokenAccounts",n,t),{refreshInterval:5e3})}function bt(e,t,n){if(!e||!t)return null;var r=e.filter((function(e){var r=e.effectiveMint,a=e.pubkey;return t.equals(r)&&(!n||("string"===typeof n?n:n.toBase58())===a.toBase58())}));return r&&r[0]}function vt(){var e=mt(),t=Object(s.a)(e,1)[0],n=it().market,r=ct(),a=Object(s.a)(r,1)[0],o=null===n||void 0===n?void 0:n.quoteMintAddress;return bt(t,o,o&&a[o.toBase58()])}function ht(){var e=mt(),t=Object(s.a)(e,1)[0],n=it().market,r=ct(),a=Object(s.a)(r,1)[0],o=null===n||void 0===n?void 0:n.baseMintAddress;return bt(t,o,o&&a[o.toBase58()])}function gt(){var e,t=vt(),n=it().market,r=G(null===t||void 0===t?void 0:t.pubkey),a=Object(s.a)(r,2),o=a[0],c=a[1];return n&&t&&c&&o?n.quoteMintAddress.equals(X.TokenInstructions.WRAPPED_SOL_MINT)?null!==(e=(null===o||void 0===o?void 0:o.lamports)/1e9)&&void 0!==e?e:0:n.quoteSplSizeToNumber(new p.BN(o.data.slice(64,72),10,"le")):null}function kt(){var e,t=ht(),n=it().market,r=G(null===t||void 0===t?void 0:t.pubkey),a=Object(s.a)(r,2),o=a[0],c=a[1];return n&&t&&c&&o?n.baseMintAddress.equals(X.TokenInstructions.WRAPPED_SOL_MINT)?null!==(e=(null===o||void 0===o?void 0:o.lamports)/1e9)&&void 0!==e?e:0:n.baseSplSizeToNumber(new p.BN(o.data.slice(64,72),10,"le")):null}function yt(){var e,t=oe(),n=t.wallet,r=t.connected,a=U(),o=it().customMarkets,c=Ot(o),i=Object(S.a)(new Set(c.map((function(e){return e.programId.toBase58()})))).map((function(e){return new f.c(e)}));return R(function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Promise.all(i.map((function(e){return X.OpenOrders.findForOwner(a,n.publicKey,e)})));case 4:return e.abrupt("return",e.sent.flat());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Object(K.a)("getAllOpenOrdersAccounts",a,r,null===n||void 0===n||null===(e=n.publicKey)||void 0===e?void 0:e.toBase58(),o.length,(i||[]).length),{refreshInterval:5e3})}function Et(){var e=kt(),t=gt(),n=pt(!0),r=it(),a=r.baseCurrency,o=r.quoteCurrency,c=r.market,i=n&&n.baseTokenTotal&&n.baseTokenFree,u=n&&n.quoteTokenTotal&&n.quoteTokenFree;return a&&o?[{market:c,key:"".concat(a).concat(o).concat(a),coin:a,wallet:e,orders:i&&c&&n?c.baseSplSizeToNumber(n.baseTokenTotal.sub(n.baseTokenFree)):null,openOrders:n,unsettled:i&&c&&n?c.baseSplSizeToNumber(n.baseTokenFree):null},{market:c,key:"".concat(o).concat(a).concat(o),coin:o,wallet:t,openOrders:n,orders:u&&c&&n?c.quoteSplSizeToNumber(n.quoteTokenTotal.sub(n.quoteTokenFree)):null,unsettled:u&&c&&n?c.quoteSplSizeToNumber(n.quoteTokenFree):null}]:[]}function Ot(e){var t=e.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{address:new f.c(e.address),programId:new f.c(e.programId),deprecated:!1})}));return[].concat(Object(S.a)(t),$e)}var wt=n(38),xt=n(39);function jt(){var e=Object(wt.a)(["\nhtml,body{\n  background: #11161D;\n}\ninput[type=number]::-webkit-inner-spin-button {\n  opacity: 0;\n}\ninput[type=number]:hover::-webkit-inner-spin-button,\ninput[type=number]:focus::-webkit-inner-spin-button {\n  opacity: 0.25;\n}\n/* width */\n::-webkit-scrollbar {\n  width: 15px;\n}\n/* Track */\n::-webkit-scrollbar-track {\n  background: #2d313c;\n}\n/* Handle */\n::-webkit-scrollbar-thumb {\n  background: #5b5f67;\n}\n/* Handle on hover */\n::-webkit-scrollbar-thumb:hover {\n  background: #5b5f67;\n}\n.ant-slider-track, .ant-slider:hover .ant-slider-track {\n  background-color: #2abdd2;\n  opacity: 0.75;\n}\n.ant-slider-track,\n.ant-slider ant-slider-track:hover {\n  background-color: #2abdd2;\n  opacity: 0.75;\n}\n.ant-slider-dot-active,\n.ant-slider-handle,\n.ant-slider-handle-click-focused,\n.ant-slider:hover .ant-slider-handle:not(.ant-tooltip-open)  {\n  border: 2px solid #2abdd2;\n}\n.ant-table-tbody > tr.ant-table-row:hover > td {\n  background: #273043;\n}\n.ant-table-tbody > tr > td {\n  border-bottom: 8px solid #000;\n}\n.ant-table-container table > thead > tr:first-child th {\n  border-bottom: none;\n}\n.ant-divider-horizontal.ant-divider-with-text::before, .ant-divider-horizontal.ant-divider-with-text::after {\n  border-top: 1px solid #434a59 !important;\n}\n.ant-layout {\n    background: #000\n  }\n  .ant-table {\n    background: #000;\n  }\n  .ant-table-thead > tr > th {\n    background: #000;\n  }\n.ant-select-item-option-content {\n  img {\n    margin-right: 4px;\n  }\n}\n.ant-modal-content {\n  background-color: #212734;\n}\n\n@-webkit-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n@-moz-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n@-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n.flash {\n  -moz-animation: highlight 0.5s ease 0s 1 alternate ;\n  -webkit-animation: highlight 0.5s ease 0s 1 alternate;\n  animation: highlight 0.5s ease 0s 1 alternate;\n}"]);return jt=function(){return e},e}var St=Object(xt.a)(jt()),At=n(255),Tt=n(179),Ct=n(176),Bt=n(468),Mt=Bt.a.Title,Nt=function(e){Object(Tt.a)(n,e);var t=Object(Ct.a)(n);function n(){var e;Object(T.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(A.a)(n,[{key:"render",value:function(){return this.state.hasError?a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(Mt,{level:2},"Something went wrong."),a.a.createElement(Mt,{level:4},"Please try again later."))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.Component),zt=n(51),Pt=n(78),It=n(125);function Rt(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current&&n.current()}),t);return function(){clearInterval(e)}}}),[t])}function Ft(){var e=Object(wt.a)(["\n  margin: 5px;\n  padding: 20px;\n  background-color: #1a2029;\n"]);return Ft=function(){return e},e}var Kt=xt.c.div(Ft());function qt(e){var t=e.style,n=e.children;return a.a.createElement(Kt,{style:Object(V.a)({},t)},n)}var _t=n(475),Lt=n(476);function Dt(){var e=Object(wt.a)(["\n  position: absolute;\n  right: 5px;\n  color: white;\n"]);return Dt=function(){return e},e}function Ut(){var e=Object(wt.a)(["\n      background-color: ",";\n    "]);return Ut=function(){return e},e}function Wt(){var e=Object(wt.a)(["\n      width: ",";\n    "]);return Wt=function(){return e},e}function Ht(){var e=Object(wt.a)(["\n  text-align: right;\n  float: right;\n  height: 100%;\n  ","\n  ","\n"]);return Ht=function(){return e},e}function Gt(){var e=Object(wt.a)(["\n  padding: 20px 0 14px;\n  font-weight: 700;\n"]);return Gt=function(){return e},e}function Jt(){var e=Object(wt.a)(["\n  padding: 20px 0 14px;\n  color: #434a59;\n"]);return Jt=function(){return e},e}function Vt(){var e=Object(wt.a)(["\n  color: rgba(255, 255, 255, 1);\n"]);return Vt=function(){return e},e}var Xt=xt.c.div(Vt()),Yt=Object(xt.c)(It.a)(Jt()),Zt=Object(xt.c)(It.a)(Gt()),Qt=xt.c.div(Ht(),(function(e){return e["data-width"]&&Object(xt.b)(Wt(),e["data-width"])}),(function(e){return e["data-bgcolor"]&&Object(xt.b)(Ut(),e["data-bgcolor"])})),$t=xt.c.div(Dt());function en(e){var t,n=e.smallScreen,o=e.depth,c=void 0===o?7:o,i=e.onPrice,u=e.onSize,l=ut(),d=dt(),f=Object(s.a)(d,1)[0],p=it(),m=p.baseCurrency,b=p.quoteCurrency,v=p.market,h=Object(r.useRef)(null),g=Object(r.useRef)(null),k=Object(r.useState)(null),y=Object(s.a)(k,2),E=y[0],O=y[1];function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.slice(0,c).reduce((function(e,n,r){var a,o=Object(s.a)(n,2),c=o[0],i=o[1],u=((null===(a=e[r-1])||void 0===a?void 0:a.cumulativeSize)||0)+i;return e.push({price:c,size:i,cumulativeSize:u,sizePercent:Math.round(u/(t||1)*100)}),e}),[]);return n&&(r=r.reverse()),r}return v&&(t=Qe.filter((function(e){return e.marketAddress.toBase58()===v.address.toBase58()}))[0]),Rt((function(){if(!h.current||JSON.stringify(h.current)!==JSON.stringify(g.current)){var e=(null===f||void 0===f?void 0:f.bids)||[],t=(null===f||void 0===f?void 0:f.asks)||[],n=function(e,t,n){var r=Object(s.a)(t,2)[1];return n<c?e+r:e},r=e.reduce(n,0)+t.reduce(n,0),a=w(e,r,!1),o=w(t,r,!0);h.current={bids:null===f||void 0===f?void 0:f.bids,asks:null===f||void 0===f?void 0:f.asks},O({bids:a,asks:o})}}),250),Object(r.useEffect)((function(){g.current={bids:null===f||void 0===f?void 0:f.bids,asks:null===f||void 0===f?void 0:f.asks}}),[f]),a.a.createElement(qt,{style:n?{flex:1,background:"transparent",borderRadius:"25px",border:"solid 3px"}:{height:"500px",overflow:"hidden",background:"transparent",borderRadius:"25px",border:"solid 3px"}},a.a.createElement(Xt,null,"Orderbook"),a.a.createElement(Yt,null,a.a.createElement(Pt.a,{span:12,style:{textAlign:"left"}},"Size (","UNKNOWN"===m&&v?t.name:m,")"),a.a.createElement(Pt.a,{span:12,style:{textAlign:"right"}},"Price (",b,")")),null===E||void 0===E?void 0:E.asks.map((function(e){var t=e.price,n=e.size,r=e.sizePercent;return a.a.createElement(tn,{key:t+"",price:t,size:n,side:"sell",sizePercent:r,onPriceClick:function(){return i(t)},onSizeClick:function(){return u(n)}})})),a.a.createElement(nn,{markPrice:l}),null===E||void 0===E?void 0:E.bids.map((function(e){var t=e.price,n=e.size,r=e.sizePercent;return a.a.createElement(tn,{key:t+"",price:t,size:n,side:"buy",sizePercent:r,onPriceClick:function(){return i(t)},onSizeClick:function(){return u(n)}})})))}var tn=a.a.memo((function(e){var t=e.side,n=e.price,o=e.size,c=e.sizePercent,i=e.onSizeClick,u=e.onPriceClick,l=Object(r.useRef)(),s=it().market;Object(r.useEffect)((function(){var e,t;!(null===(e=l.current)||void 0===e?void 0:e.classList.contains("flash"))&&(null===(t=l.current)||void 0===t||t.classList.add("flash"));var n=setTimeout((function(){var e,t;return(null===(e=l.current)||void 0===e?void 0:e.classList.contains("flash"))&&(null===(t=l.current)||void 0===t?void 0:t.classList.remove("flash"))}),250);return function(){return clearTimeout(n)}}),[n,o]);var d=(null===s||void 0===s?void 0:s.minOrderSize)&&!isNaN(o)?Number(o).toFixed(k(s.minOrderSize)+1):o,f=(null===s||void 0===s?void 0:s.tickSize)&&!isNaN(n)?Number(n).toFixed(k(s.tickSize)+1):n;return a.a.createElement(It.a,{ref:l,style:{marginBottom:1},onClick:i},a.a.createElement(Pt.a,{span:12,style:{textAlign:"left"}},d),a.a.createElement(Pt.a,{span:12,style:{textAlign:"right"}},a.a.createElement(Qt,{"data-width":c+"%","data-bgcolor":"buy"===t?"rgba(65, 199, 122, 0.6)":"rgba(242, 60, 105, 0.6)"}),a.a.createElement($t,{onClick:u},f)))}),(function(e,t){return j(e,t,["price","size","sizePercent"])})),nn=a.a.memo((function(e){var t=e.markPrice,n=it().market,o=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e}),[e]),t.current}(t),c=t>o?"#41C77A":t<o?"#F23B69":"white",i=t&&(null===n||void 0===n?void 0:n.tickSize)&&t.toFixed(k(n.tickSize));return a.a.createElement(Zt,{justify:"center"},a.a.createElement(Pt.a,{style:{color:c}},t>o&&a.a.createElement(_t.a,{style:{marginRight:5}}),t<o&&a.a.createElement(Lt.a,{style:{marginRight:5}}),i||"----"))}),(function(e,t){return j(e,t,["markPrice"])})),rn=n(62),an=n(24),on=n(467);function cn(e){var t=e.dataSource,n=e.columns,r=e.emptyLabel,o=void 0===r?"No data":r,c=e.pagination,i=void 0!==c&&c,u=e.loading,l=void 0!==u&&u,s=e.pageSize,d=void 0===s?10:s;return a.a.createElement(an.b,{renderEmpty:function(){return a.a.createElement("div",{style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center"}},o)}},a.a.createElement(on.a,{dataSource:t,columns:n,pagination:!!i&&{pagination:!0,pageSize:d},loading:l}))}function un(e){var t,n=e.balances,r=e.showMarket,o=e.hideWalletBalance,c=e.onSettleSuccess,i=mt(),d=Object(s.a)(i,1)[0],f=W(),p=oe().wallet,m=it().market;function b(){return(b=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me({market:t,openOrders:n,connection:f,wallet:p,baseCurrencyAccount:bt(d,null===t||void 0===t?void 0:t.baseMintAddress),quoteCurrencyAccount:bt(d,null===t||void 0===t?void 0:t.quoteMintAddress)});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),te({message:"Error settling funds",description:e.t0.message,type:"error"}),e.abrupt("return");case 9:c&&c();case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}m&&(t=Qe.filter((function(e){return e.marketAddress.toBase58()===m.address.toBase58()}))[0]),n.forEach((function(e,n){"UNKNOWN"===e.coin&&(e.coin=t.name)}));var v=[r?{title:"Market",dataIndex:"marketName",key:"marketName"}:null,{title:"Coin",dataIndex:"coin",key:"coin"},o?null:{title:"Wallet Balance",dataIndex:"wallet",key:"wallet"},{title:"Orders",dataIndex:"orders",key:"orders"},{title:"Unsettled",dataIndex:"unsettled",key:"unsettled"},{key:"action",render:function(e){var t=e.market,n=e.openOrders,r=e.marketName;return a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement(rn.a,{ghost:!0,style:{marginRight:12},onClick:function(){return function(e,t){return b.apply(this,arguments)}(t,n)}},"Settle ",r))}}].filter((function(e){return e}));return a.a.createElement(cn,{emptyLabel:"No balances",dataSource:n,columns:v,pagination:!1})}var ln=n(472),sn=n(477);function dn(){var e=Object(wt.a)(["\n  color: #f23b69;\n  border: 1px solid #f23b69;\n"]);return dn=function(){return e},e}var fn=Object(xt.c)(rn.a)(dn());function pn(e){var t=e.openOrders,n=e.onCancelSuccess,o=e.pageSize,c=e.loading,i=e.marketFilter,d=oe().wallet,f=W(),p=Object(r.useState)(null),m=Object(s.a)(p,2),b=m[0],v=m[1];function h(){return(h=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(null===t||void 0===t?void 0:t.orderId),e.prev=1,e.next=4,ge({order:t,market:t.market,connection:f,wallet:d});case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),te({message:"Error cancelling order",description:e.t0.message,type:"error"}),e.abrupt("return");case 10:return e.prev=10,v(null),e.finish(10);case 13:n&&n();case 14:case"end":return e.stop()}}),e,null,[[1,6,10,13]])})))).apply(this,arguments)}var g=Object(S.a)(new Set((t||[]).map((function(e){return e.marketName})))).map((function(e){return{text:e,value:e}})),k=[{title:"Market",dataIndex:"marketName",key:"marketName",filters:i?g:void 0,onFilter:function(e,t){return 0===t.marketName.indexOf(e)}},{title:"Side",dataIndex:"side",key:"side",render:function(e){return a.a.createElement(ln.a,{color:"buy"===e?"#41C77A":"#F23B69",style:{fontWeight:700}},e.charAt(0).toUpperCase()+e.slice(1))},sorter:function(e,t){return e.side===t.side?0:"buy"===e.side?1:-1},showSorterTooltip:!1},{title:"Size",dataIndex:"size",key:"size",sorter:function(e,t){return t.size-e.size},showSorterTooltip:!1},{title:"Price",dataIndex:"price",key:"price",sorter:function(e,t){return t.price-e.price},showSorterTooltip:!1},{key:"orderId",render:function(e){return a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement(fn,{icon:a.a.createElement(sn.a,null),onClick:function(){return function(e){return h.apply(this,arguments)}(e)},loading:b+""===(null===e||void 0===e?void 0:e.orderId)+""},"Cancel"))}}],y=(t||[]).map((function(e){return Object.assign(e,{key:e.orderId})}));return a.a.createElement(It.a,null,a.a.createElement(Pt.a,{span:24},a.a.createElement(cn,{emptyLabel:"No open orders",dataSource:y,columns:k,pagination:!0,pageSize:o||5,loading:void 0!==c&&c})))}var mn=n(201);function bn(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=it(),n=t.marketName,r=lt(e),a=ft(),o=Object(s.a)(a,1),c=o[0];return c&&0!==c.length&&r?r.filter((function(e){return c.some((function(t){return e.openOrders.equals(t.publicKey)}))})).map((function(e){return Object(V.a)(Object(V.a)({},e),{},{marketName:n})})):null}(),t=it().quoteCurrency,n=[{title:"Market",dataIndex:"marketName",key:"marketName"},{title:"Side",dataIndex:"side",key:"side",render:function(e){return a.a.createElement(ln.a,{color:"buy"===e?"#41C77A":"#F23B69",style:{fontWeight:700}},e.charAt(0).toUpperCase()+e.slice(1))}},{title:"Size",dataIndex:"size",key:"size"},{title:"Price",dataIndex:"price",key:"price"},{title:"Liquidity",dataIndex:"liquidity",key:"liquidity"},{title:t?"Fees (".concat(t,")"):"Fees",dataIndex:"feeCost",key:"feeCost"}],r=(e||[]).map((function(e){return Object(V.a)(Object(V.a)({},e),{},{key:"".concat(e.orderId).concat(e.side),liquidity:e.eventFlags.maker?"Maker":"Taker"})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(It.a,null,a.a.createElement(Pt.a,{span:24},a.a.createElement(cn,{dataSource:r,columns:n,pagination:!0,pageSize:5,emptyLabel:"No fills"}))))}var vn=mn.a.TabPane;function hn(){return a.a.createElement(qt,{style:{flex:1,paddingTop:20,background:"transparent",borderRadius:"25px",border:"solid 3px"}},a.a.createElement(mn.a,{defaultActiveKey:"orders"},a.a.createElement(vn,{tab:"Open Orders",key:"orders"},a.a.createElement(gn,null)),a.a.createElement(vn,{tab:"Recent Trade History",key:"fills"},a.a.createElement(bn,null)),a.a.createElement(vn,{tab:"Balances",key:"balances"},a.a.createElement(kn,null))))}var gn=function(){var e=function(){var e=it(),t=e.market,n=e.marketName,r=pt(),a=st(),o=a.bidOrderbook,c=a.askOrderbook;return t&&r&&o&&c?t.filterForOpenOrders(o,c,[r]).map((function(e){return Object(V.a)(Object(V.a)({},e),{},{marketName:n,market:t})})):null}();return a.a.createElement(pn,{openOrders:e})},kn=function(){var e=Et();return a.a.createElement(un,{balances:e})},yn=n(465),En=n(469);function On(e){var t,n,r,o=e.onClose,c=e.baseOrQuote,i=it(),u=i.market,l=i.baseCurrency,s=i.quoteCurrency,d=oe(),f=d.providerName,p=d.providerUrl,m=ht(),b=vt();return"base"===c?(t=null===u||void 0===u?void 0:u.baseMintAddress,n=m,r=l):"quote"===c?(t=null===u||void 0===u?void 0:u.quoteMintAddress,n=b,r=s):n=null,t?a.a.createElement(En.a,{title:r,visible:!!t,onOk:o,onCancel:o},a.a.createElement("div",{style:{paddingTop:"20px"}},a.a.createElement("p",{style:{color:"white"}},"Mint address:"),a.a.createElement("p",{style:{color:"rgba(255,255,255,0.5)"}},t.toBase58()),a.a.createElement("div",null,a.a.createElement("p",{style:{color:"white"}},"SPL Deposit address:"),a.a.createElement("p",{style:{color:"rgba(255,255,255,0.5)"}},n?n.pubkey.toBase58():a.a.createElement(a.a.Fragment,null,"Visit"," ",a.a.createElement(ee,{external:!0,to:p},f)," ","to create an account for this mint"))))):null}var wn=n(140),xn=n(478);function jn(e){var t,n=e.accounts,r=e.mint,o=e.label,c=ct(),i=Object(s.a)(c,2),u=i[0],l=i[1];t=r&&r in u?u[r]:n&&(null===n||void 0===n?void 0:n.length)>0?n[0].pubkey.toBase58():void 0;return a.a.createElement(a.a.Fragment,null,o&&a.a.createElement(Pt.a,{span:8},"Token account:"),a.a.createElement(Pt.a,{span:o?13:21},a.a.createElement(wn.a,{style:{width:"100%"},value:t,onSelect:function(e){if(r){var t=Object(V.a)({},u);t[r]=e,l(t)}else te({message:"Error selecting token account",description:"Mint is undefined",type:"error"})}},null===n||void 0===n?void 0:n.map((function(e){return a.a.createElement(wn.a.Option,{key:e.pubkey.toBase58(),value:e.pubkey.toBase58()},a.a.createElement(Bt.a.Text,{code:!0},o?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.toBase58();return n.slice(0,t)+"\u2026"+n.slice(-t)}(e.pubkey,8):e.pubkey.toBase58()))})))),a.a.createElement(Pt.a,{span:2,offset:1},a.a.createElement(rn.a,{shape:"round",icon:a.a.createElement(xn.a,null),size:"small",onClick:function(){return t&&navigator.clipboard.writeText(t)}})))}function Sn(){var e=Object(wt.a)(["\n  color: #8f5cff;\n  border: solid 2px;\n  height: 50px;\n  width: 120px;\n  border-radius: 25px;\n  &:hover: {\n    color: #000;\n  }\n"]);return Sn=function(){return e},e}function An(){var e=Object(wt.a)(["\n  font-size: 12px;\n  padding-top: 6px;\n"]);return An=function(){return e},e}function Tn(){var e=Object(wt.a)(["\n  padding-bottom: 20px;\n"]);return Tn=function(){return e},e}var Cn=Object(xt.c)(It.a)(Tn()),Bn=xt.c.p(An()),Mn=Object(xt.c)(rn.a)(Sn());function Nn(){var e,t=it(),n=t.baseCurrency,o=t.quoteCurrency,c=t.market,i=Et(),d=pt(!0),f=W(),p=oe(),m=p.providerUrl,b=p.providerName,v=p.wallet,h=p.connected,g=Object(r.useState)(""),k=Object(s.a)(g,2),y=k[0],E=k[1],O=ht(),w=vt(),x=mt(),j=Object(s.a)(x,1)[0],S=i&&i.find((function(e){return e.coin===n})),A=i&&i.find((function(e){return e.coin===o}));function T(){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=3;break}return te({message:"Error settling funds",description:"market is undefined",type:"error"}),e.abrupt("return");case 3:if(d){e.next=6;break}return te({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 6:if(O){e.next=9;break}return te({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 9:if(w){e.next=12;break}return te({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 12:return e.prev=12,e.next=15,me({market:c,openOrders:d,connection:f,wallet:v,baseCurrencyAccount:O,quoteCurrencyAccount:w});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),te({message:"Error settling funds",description:e.t0.message,type:"error"});case 20:case"end":return e.stop()}}),e,null,[[12,17]])})))).apply(this,arguments)}c&&(e=Qe.filter((function(e){return e.marketAddress.toBase58()===c.address.toBase58()}))[0]);var B=[[n,S,"base",null===c||void 0===c?void 0:c.baseMintAddress.toBase58()],[o,A,"quote",null===c||void 0===c?void 0:c.quoteMintAddress.toBase58()]];return a.a.createElement(qt,{style:{flex:1,paddingTop:10,background:"transparent",borderRadius:"25px",border:"solid 3px"}},B.map((function(t,n){var r=Object(s.a)(t,4),o=r[0],i=r[1],u=r[2],l=r[3];return a.a.createElement(a.a.Fragment,{key:n},a.a.createElement(yn.a,{style:{borderColor:"white"}},"base"===u&&c?e.name:o),h&&a.a.createElement(Cn,{align:"middle",style:{paddingBottom:10}},a.a.createElement(jn,{accounts:null===j||void 0===j?void 0:j.filter((function(e){return e.effectiveMint.toBase58()===l})),mint:l,label:!0})),a.a.createElement(Cn,{align:"middle",justify:"space-between",style:{paddingBottom:12}},a.a.createElement(Pt.a,null,"Wallet balance:"),a.a.createElement(Pt.a,null,i&&i.wallet)),a.a.createElement(Cn,{align:"middle",justify:"space-between",style:{paddingBottom:12}},a.a.createElement(Pt.a,null,"Unsettled balance:"),a.a.createElement(Pt.a,null,i&&i.unsettled)),a.a.createElement(Cn,{align:"middle",justify:"space-around"},a.a.createElement(Pt.a,{style:{width:150}},a.a.createElement(Mn,{ghost:!0,size:"large",onClick:function(){return E(u)}},"Deposit")),a.a.createElement(Pt.a,{style:{width:150}},a.a.createElement(Mn,{ghost:!0,size:"large",onClick:T},"Settle"))),a.a.createElement(Bn,null,"All deposits go to your"," ",a.a.createElement(ee,{external:!0,to:m},b)," ","wallet"))})),a.a.createElement(On,{baseOrQuote:y,onClose:function(){return E("")}}))}var zn=n(471),Pn=n(479),In=n(177),Rn=n(470);function Fn(){var e=Object(wt.a)(["\n  margin: 20px 0px 0px 0px;\n  background: #02bf76;\n  border-color: #02bf76;\n  &:hover {\n    background: #000;\n    border-color: #000;\n    color: #02bf76;\n    border: solid 2px;\n  }\n"]);return Fn=function(){return e},e}function Kn(){var e=Object(wt.a)(["\n  margin: 20px 0px 0px 0px;\n  background: #f23b69;\n  border-color: #f23b69;\n  &:hover {\n    background: #000;\n    border-color: #000;\n    color: #f23b69;\n    border: solid 2px;\n  }\n"]);return Kn=function(){return e},e}var qn=Object(xt.c)(rn.a)(Kn()),_n=Object(xt.c)(rn.a)(Fn());function Ln(e){var t,n=e.style,o=e.setChangeOrderRef,c=Object(r.useState)("buy"),i=Object(s.a)(c,2),d=i[0],f=i[1],p=it(),m=p.baseCurrency,b=p.quoteCurrency,v=p.market,y=kt(),E=gt(),O=ht(),w=vt(),x=pt(!0),j=oe().wallet,S=W(),A=ut(),T=Object(r.useState)(!1),C=Object(s.a)(T,1)[0],B=Object(r.useState)(!1),M=Object(s.a)(B,1)[0],N=Object(r.useState)(void 0),z=Object(s.a)(N,2),P=z[0],I=z[1],R=Object(r.useState)(void 0),F=Object(s.a)(R,2),K=F[0],q=F[1],_=Object(r.useState)(void 0),L=Object(s.a)(_,2),D=L[0],U=L[1],H=Object(r.useState)(!1),G=Object(s.a)(H,2),J=G[0],X=G[1],Y=Object(r.useState)(0),Z=Object(s.a)(Y,2),Q=Z[0],$=Z[1];v&&(t=Qe.filter((function(e){return e.marketAddress.toBase58()===v.address.toBase58()}))[0]);var ee=(E||0)+((x&&v?v.quoteSplSizeToNumber(x.quoteTokenFree):0)||0),ne=y||0,re=(null===v||void 0===v?void 0:v.minOrderSize)&&k(v.minOrderSize),ae=(null===v||void 0===v?void 0:v.tickSize)&&k(v.tickSize);Object(r.useEffect)((function(){o&&o(ie)}),[o]),Object(r.useEffect)((function(){P&&D&&le(Q)}),[d]),Object(r.useEffect)((function(){ue()}),[D,P]);var ce=function(e){if(I(e),e){var t=D||A;if(t){var n=e&&g(e*t,re);q(n)}else q(void 0)}else q(void 0)},ie=function(e){var t=e.size,n=e.price,r=t&&g(t,re),a=n&&g(n,ae);r&&ce(r),a&&U(a)},ue=function(){var e=h("buy"===d?ee/(D||A||1):ne,re),t=Math.min((P||0)/e*100,100);$(t)},le=function(e){if(!D&&A){var t=ae?A.toFixed(ae):A;U("number"===typeof t?t:parseFloat(t))}var n;"buy"===d?(D||A)&&(n=ee/(D||A||1)*e/100):n=ne*e/100;var r=h(n,re);ce(r)};function se(){return de.apply(this,arguments)}function de(){return(de=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=6;break}return console.warn("Missing price"),te({message:"Missing price",type:"error"}),e.abrupt("return");case 6:if(P){e.next=10;break}return console.warn("Missing size"),te({message:"Missing size",type:"error"}),e.abrupt("return");case 10:return X(!0),e.prev=11,e.next=14,Oe({side:d,price:D,size:P,orderType:M?"ioc":C?"postOnly":"limit",market:v,connection:S,wallet:j,baseCurrencyAccount:null===O||void 0===O?void 0:O.pubkey,quoteCurrencyAccount:null===w||void 0===w?void 0:w.pubkey});case 14:U(void 0),ce(void 0),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(11),console.warn(e.t0),te({message:"Error placing order",description:e.t0.message,type:"error"});case 22:return e.prev=22,X(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[11,18,22,25]])})))).apply(this,arguments)}return a.a.createElement(qt,{style:Object(V.a)({display:"flex",flexDirection:"column",background:"transparent"},n)},a.a.createElement("div",{style:{flex:1}},a.a.createElement(In.a.Group,{onChange:function(e){return f(e.target.value)},value:d,buttonStyle:"solid",style:{marginBottom:8,width:"100%"}},a.a.createElement(In.a.Button,{value:"buy",style:{width:"50%",textAlign:"center",background:"buy"===d?"#02bf76":"",borderColor:"buy"===d?"#02bf76":""}},"BUY"),a.a.createElement(In.a.Button,{value:"sell",style:{width:"50%",textAlign:"center",background:"sell"===d?"#F23B69":"",borderColor:"sell"===d?"#F23B69":""}},"SELL")),a.a.createElement(Rn.a,{style:{textAlign:"right",paddingBottom:8},addonBefore:a.a.createElement("div",{style:{width:"30px"}},"Price"),suffix:a.a.createElement("span",{style:{fontSize:10,opacity:.5}},b),value:D,type:"number",step:(null===v||void 0===v?void 0:v.tickSize)||1,onChange:function(e){return U(parseFloat(e.target.value))}}),a.a.createElement(Rn.a.Group,{compact:!0,style:{paddingBottom:8}},a.a.createElement(Rn.a,{style:{width:"calc(50% + 30px)",textAlign:"right"},addonBefore:a.a.createElement("div",{style:{width:"30px"}},"Size"),suffix:a.a.createElement("span",{style:{fontSize:10,opacity:.5}},"UNKNOWN"===m&&v?t.name:m),value:P,type:"number",step:(null===v||void 0===v?void 0:v.minOrderSize)||1,onChange:function(e){return ce(parseFloat(e.target.value))}}),a.a.createElement(Rn.a,{style:{width:"calc(50% - 30px)",textAlign:"right"},suffix:a.a.createElement("span",{style:{fontSize:10,opacity:.5}},b),value:K,type:"number",step:(null===v||void 0===v?void 0:v.minOrderSize)||1,onChange:function(e){return function(e){if(q(e),e){var t=D||A;if(t){var n=e&&g(e/t,re);I(n)}else I(void 0)}else I(void 0)}(parseFloat(e.target.value))}}))),"buy"===d?a.a.createElement(_n,{disabled:!D||!P,onClick:se,block:!0,type:"primary",size:"large",loading:J},"Buy ","UNKNOWN"===m&&v?t.name:m):a.a.createElement(qn,{disabled:!D||!P,onClick:se,block:!0,type:"primary",size:"large",loading:J},"Sell ","UNKNOWN"===m&&v?t.name:m))}function Dn(){var e=Object(wt.a)(["\n  textalign: center;\n"]);return Dn=function(){return e},e}function Un(){var e=Object(wt.a)(["\n  maxwidth: 600px;\n  height: 100%;\n  background: transparent;\n  bordercolor: transparent;\n  width: auto;\n  border-radius: 25px;\n  border: solid 3px;\n  cursor: pointer;\n"]);return Un=function(){return e},e}function Wn(){var e=Object(wt.a)(["\n  color: white;\n  bordercolor: white;\n"]);return Wn=function(){return e},e}function Hn(){var e=Object(wt.a)(["\n  color: white;\n  bordertop: 1px solid;\n  borderbottom: 1px solid;\n  borderleftwidth: 0;\n  borderrightwidth: 0;\n  borderimage: linear-gradient(to right, #d07d7a, #d05651) 1 stretch;\n"]);return Hn=function(){return e},e}var Gn=Bt.a.Title,Jn=Bt.a.Paragraph,Vn=function(e){return"https://explorer.solana.com/address/"+e},Xn=Object(xt.c)(Gn)(Hn()),Yn=Object(xt.c)(rn.a)(Wn()),Zn=Object(xt.c)(zn.a)(Un()),Qn=Object(xt.c)(Jn)(Dn()),$n=function(e){var t=e.img,n=e.name,r=e.supply,o=e.mintAddress,c=e.sold,i=e.marketAddress,u=Object(zt.e)(),l=it().setMarketAddress,s=function(){l(i.toBase58()),u.push("/trade")};return a.a.createElement(a.a.Fragment,null,a.a.createElement(Zn,{onClick:s},a.a.createElement(Gn,{level:2,style:{color:"white",textAlign:"center"}},n),a.a.createElement(It.a,{align:"middle",justify:"center",style:{paddingTop:10}},a.a.createElement("img",{src:t,alt:n,style:{padding:10,height:"300px"}})),a.a.createElement(It.a,{align:"middle",justify:"center",style:{paddingTop:10}},a.a.createElement(Xn,{level:3},"Mint Address")),a.a.createElement(It.a,{align:"middle",justify:"center",style:{width:"100%"}},a.a.createElement(Pt.a,null,a.a.createElement(Jn,{copyable:!0,ellipsis:!0},o.toString())),a.a.createElement(Pt.a,{style:{paddingBottom:15,paddingLeft:10,cursor:"pointer"},onClick:function(){return window.open(Vn(o),"_blank")}},a.a.createElement(Pn.a,{style:{color:"#8f5cff"}}))),a.a.createElement(It.a,{align:"middle",justify:"center",style:{paddingTop:10}},a.a.createElement(Xn,{level:3},"Supply")),a.a.createElement(It.a,{align:"middle",justify:"center",style:{paddingTop:10}},a.a.createElement(Qn,null,r)),a.a.createElement(It.a,{align:"middle",justify:"center"},a.a.createElement(Yn,{disabled:c,ghost:!0,onClick:s},c?"Sold":"Buy"))))},er=function(e){var t=e.img,n=e.name,r=e.supply,o=e.mintAddress,c=e.setChangeOrderRef,i=a.a.useState(!1),u=Object(s.a)(i,2),l=u[0],d=u[1],f=function(){d((function(e){return!e}))};return a.a.createElement(a.a.Fragment,null,a.a.createElement(Zn,null,a.a.createElement(Gn,{level:2,style:{color:"white",textAlign:"center"}},n),a.a.createElement(It.a,{align:"middle",justify:"center",style:{paddingTop:10}},a.a.createElement("img",{src:t,alt:n,style:{padding:10,height:"400px"},onClick:f})),a.a.createElement(It.a,{align:"middle",justify:"center",style:{paddingTop:10}},a.a.createElement(Xn,{level:3},"Mint Address")),a.a.createElement(It.a,{align:"middle",justify:"center",style:{width:"100%"}},a.a.createElement(Pt.a,null,a.a.createElement(Jn,{copyable:!0,ellipsis:!0},o.toString())),a.a.createElement(Pt.a,{style:{paddingBottom:15,paddingLeft:10,cursor:"pointer"},onClick:function(){return window.open(Vn(o),"_blank")}},a.a.createElement(Pn.a,{style:{color:"#8f5cff"}}))),a.a.createElement(It.a,{align:"middle",justify:"center",style:{paddingTop:10}},a.a.createElement(Xn,{level:3},"Supply")),a.a.createElement(It.a,{align:"middle",justify:"center",style:{paddingTop:10}},a.a.createElement(Qn,null,r)),a.a.createElement(It.a,{align:"middle",justify:"center"},a.a.createElement(Ln,{setChangeOrderRef:c}))),a.a.createElement(En.a,{visible:l,onOk:f,onCancel:f,bodyStyle:{width:"45vw"},maskStyle:{width:"45vw"},width:"45vw"},a.a.createElement("img",{src:t,width:"100%",alt:n})))};function tr(){var e=Object(wt.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 16px;\n  .borderNone .ant-select-selector {\n    border: none !important;\n  }\n"]);return tr=function(){return e},e}var nr=xt.c.div(tr());function rr(){var e=it().marketName,t=Object(r.useState)({height:window.innerHeight,width:window.innerWidth}),n=Object(s.a)(t,2),o=n[0],c=n[1];Object(r.useEffect)((function(){document.title=e?"".concat(e," \u2014 Solible"):"Solible"}),[e]);var i=Object(r.useRef)();Object(r.useEffect)((function(){var e=function(){c({height:window.innerHeight,width:window.innerWidth})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var u=null===o||void 0===o?void 0:o.width,l={onChangeOrderRef:function(e){return i.current=e},onPrice:Object(r.useCallback)((function(e){return i.current&&i.current({price:e})}),[]),onSize:Object(r.useCallback)((function(e){return i.current&&i.current({size:e})}),[])},d=Object(r.useCallback)((function(){return u<1e3?a.a.createElement(cr,l):u<1450?a.a.createElement(or,l):a.a.createElement(ar,l)}),[u,l]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(nr,null,d()))}var ar=function(e){var t,n=e.onChangeOrderRef,r=e.onPrice,o=e.onSize,c=it().market;return c&&(t=Qe.filter((function(e){return e.marketAddress.toBase58()===c.address.toBase58()}))[0]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Pt.a,{flex:"auto"}),a.a.createElement(Pt.a,null,a.a.createElement(It.a,{style:{minHeight:"900px",flexWrap:"nowrap"}},a.a.createElement(Pt.a,{flex:"auto"}),a.a.createElement(Pt.a,{style:{paddingRight:"50px"}},a.a.createElement(en,{smallScreen:!1,onPrice:r,onSize:o}),a.a.createElement("div",{style:{paddingTop:"20px"}}),a.a.createElement(Nn,null)),a.a.createElement(Pt.a,null,t&&a.a.createElement(er,{img:t.img,name:t.name,supply:t.supply,mintAddress:t.mintAddress,setChangeOrderRef:n})),a.a.createElement(Pt.a,{flex:"auto"})),a.a.createElement(It.a,{style:{paddingTop:"50px"}},a.a.createElement(Pt.a,{flex:"auto"}),a.a.createElement(Pt.a,{flex:"auto"},a.a.createElement(hn,null)),a.a.createElement(Pt.a,{flex:"auto"}))),a.a.createElement(Pt.a,{flex:"auto"}))},or=function(e){var t,n=e.onChangeOrderRef,r=e.onPrice,o=e.onSize,c=it().market;return c&&(t=Qe.filter((function(e){return e.marketAddress.toBase58()===c.address.toBase58()}))[0]),a.a.createElement(a.a.Fragment,null,a.a.createElement(It.a,{style:{height:"900px"}},a.a.createElement(Pt.a,{flex:"auto",style:{height:"100%",display:"flex"}},t&&a.a.createElement(er,{img:t.img,name:t.name,supply:t.supply,mintAddress:t.mintAddress,setChangeOrderRef:n}),a.a.createElement(en,{smallScreen:!0,depth:13,onPrice:r,onSize:o})),a.a.createElement(Pt.a,{flex:"400px",style:{height:"100%",display:"flex",flexDirection:"column"}},a.a.createElement(Nn,null))),a.a.createElement(It.a,null,a.a.createElement(Pt.a,{flex:"auto"},a.a.createElement(hn,null))))},cr=function(e){var t,n=e.onChangeOrderRef,r=e.onPrice,o=e.onSize,c=it().market;return c&&(t=Qe.filter((function(e){return e.marketAddress.toBase58()===c.address.toBase58()}))[0]),a.a.createElement(a.a.Fragment,null,a.a.createElement(It.a,null,a.a.createElement(Pt.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},t&&a.a.createElement(er,{img:t.img,name:t.name,supply:t.supply,mintAddress:t.mintAddress,setChangeOrderRef:n})),a.a.createElement(Pt.a,{xs:24,sm:12},a.a.createElement(Nn,null))),a.a.createElement(It.a,{style:{height:"500px"}},a.a.createElement(Pt.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},a.a.createElement(en,{smallScreen:!0,onPrice:r,onSize:o}))),a.a.createElement(It.a,null,a.a.createElement(Pt.a,{flex:"auto"},a.a.createElement(hn,null))))};function ir(){var e=function(){var e,t=U(),n=oe().connected,r=yt(),a=Object(s.a)(r,2),o=a[0],c=a[1],i=et(it().customMarkets),f=Object(s.a)(i,2),p=f[0],m=f[1],b={},v=Object(d.a)(o||[]);try{for(v.s();!(e=v.n()).done;){var h=e.value,g=h.market.toBase58();g in b||(b[g]=[]),b[g].push(h)}}catch(x){v.e(x)}finally{v.f()}var k=Object.fromEntries((p||[]).map((function(e){return[e.market.publicKey.toBase58(),e]}))),y=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.keys(b).map(function(){var e=Object(l.a)(u.a.mark((function e(n){var r,a,o,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k[n].market,e.next=3,Promise.all([r.loadBids(t),r.loadAsks(t)]);case 3:return a=e.sent,o=Object(s.a)(a,2),c=o[0],i=o[1],e.abrupt("return",{orders:r.filterForOpenOrders(c,i,b[n]),marketAddress:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=Object(K.a)("getAllOpenOrders",c,(o||[]).length,t,n,m),O=R(y,E,{refreshInterval:nt}),w=Object(s.a)(O,2);return{openOrders:w[0],loaded:w[1],refreshOpenOrders:function(){return F(E)}}}(),t=e.openOrders,n=e.loaded,r=e.refreshOpenOrders,o=it().customMarkets,c=Ot(o),i=Object.fromEntries(c.map((function(e){return[e.address.toBase58(),e.name]}))),f=et(o),p=Object(s.a)(f,1)[0],m=Object.fromEntries((p||[]).map((function(e){return[e.market.address.toBase58(),e.market]}))),b=(t||[]).map((function(e){return e.orders.map((function(t){return Object(V.a)({marketName:i[e.marketAddress],market:m[e.marketAddress]},t)}))})).flat();return a.a.createElement(qt,{style:{flex:1,paddingTop:10}},a.a.createElement(rn.a,{onClick:r,loading:!n},"Refresh"),a.a.createElement(pn,{openOrders:b,pageSize:25,loading:!n,onCancelSuccess:r,marketFilter:!0}))}function ur(e){var t=e.walletBalances,n=U(),o=oe(),c=o.wallet,i=o.connected,d=ct(),f=Object(s.a)(d,1)[0],p=mt(),m=Object(s.a)(p,2),b=m[0],v=m[1],h=et(it().customMarkets),g=Object(s.a)(h,2),k=g[0],y=g[1],E=Object(r.useState)(!1),O=Object(s.a)(E,2),w=O[0],x=O[1];function j(){return(j=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),e.prev=1,b&&v){e.next=5;break}return te({message:"Error settling funds",description:"TokenAccounts not connected",type:"error"}),e.abrupt("return");case 5:if(k&&y){e.next=8;break}return te({message:"Error settling funds",description:"Markets not connected",type:"error"}),e.abrupt("return");case 8:return e.next=10,ve({connection:n,tokenAccounts:b,selectedTokenAccounts:f,wallet:c,markets:k.map((function(e){return e.market}))});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),te({message:"Error settling funds",description:e.t0.message,type:"error"});case 15:return e.prev=15,x(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})))).apply(this,arguments)}var S=[{title:"Coin",dataIndex:"coin",key:"coin",width:"20%"},{title:"Wallet Balance",dataIndex:"walletBalance",key:"walletBalance",width:"20%"},{title:"Open orders total balances",dataIndex:"openOrdersTotal",key:"openOrdersTotal",width:"20%"},{title:"Unsettled balances",dataIndex:"openOrdersFree",key:"openOrdersFree",width:"20%"},{title:"Selected token account",key:"selectTokenAccount",width:"20%",render:function(e){return a.a.createElement(It.a,{align:"middle",style:{width:"430px"}},a.a.createElement(jn,{accounts:null===b||void 0===b?void 0:b.filter((function(t){return t.effectiveMint.toBase58()===e.mint})),mint:e.mint}))}}];return a.a.createElement(a.a.Fragment,null,a.a.createElement(cn,{emptyLabel:"No balances",dataSource:t,columns:S,pagination:!1}),i&&a.a.createElement(rn.a,{onClick:function(){return j.apply(this,arguments)},loading:w},"Settle all funds"))}var lr=mn.a.TabPane;function sr(){var e=function(){var e=mt(),t=Object(s.a)(e,1)[0],n=oe().connected,r=Xe(),a=Object(s.a)(r,2),o=a[0],c=a[1];if(!n||!c)return[];var i,u={},l=Object(d.a)(t||[]);try{for(l.s();!(i=l.n()).done;){var f=i.value;if(f.account){var m=void 0;(m=f.effectiveMint.equals(le.WRAPPED_SOL_MINT)?{mint:le.WRAPPED_SOL_MINT,owner:f.pubkey,amount:f.account.lamports}:Le(f.account.data)).mint.toBase58()in u||(u[m.mint.toBase58()]=0);var b=o&&o[m.mint.toBase58()],v=y(new p.BN(m.amount),E((null===b||void 0===b?void 0:b.decimals)||0));u[m.mint.toBase58()]+=v}}}catch(h){l.e(h)}finally{l.f()}return Object.entries(u).map((function(e){var t=Object(s.a)(e,2);return{mint:t[0],balance:t[1]}}))}(),t=function(){var e,t=it().customMarkets,n=et(t),r=Object(s.a)(n,1)[0],a=Object.fromEntries(X.TOKEN_MINTS.map((function(e){return[e.address.toBase58(),e.name]}))),o=Object(d.a)(r||[]);try{var c=function(){var n=e.value,r=t.find((function(e){return e.address===n.market.address.toBase58()}));n.market.baseMintAddress.toBase58()in a||r&&(a[n.market.baseMintAddress.toBase58()]=r.baseLabel||"".concat(r.name,"_BASE")),n.market.quoteMintAddress.toBase58()in a||r&&(a[n.market.quoteMintAddress.toBase58()]=r.quoteLabel||"".concat(r.name,"_QUOTE"))};for(o.s();!(e=o.n()).done;)c()}catch(i){o.e(i)}finally{o.f()}return a}(),n=function(){var e=yt(),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Xe(),o=Object(s.a)(a,2),c=o[0],i=o[1],u=et(it().customMarkets),l=Object(s.a)(u,1)[0];if(!r||!i)return{};var f,m=Object.fromEntries((l||[]).map((function(e){return[e.market.address.toBase58(),e]}))),b={},v=Object(d.a)(n||[]);try{for(v.s();!(f=v.n()).done;){var h=f.value,g=m[h.market.toBase58()],k=null===g||void 0===g?void 0:g.market.baseMintAddress.toBase58(),O=null===g||void 0===g?void 0:g.market.quoteMintAddress.toBase58();k in b||(b[k]=[]),O in b||(b[O]=[]);var w=c&&c[k],x=y(new p.BN(h.baseTokenFree),E((null===w||void 0===w?void 0:w.decimals)||0)),j=y(new p.BN(h.baseTokenTotal),E((null===w||void 0===w?void 0:w.decimals)||0)),S=c&&c[O],A=y(new p.BN(h.quoteTokenFree),E((null===S||void 0===S?void 0:S.decimals)||0)),T=y(new p.BN(h.quoteTokenTotal),E((null===S||void 0===S?void 0:S.decimals)||0));b[k].push({market:null===g||void 0===g?void 0:g.market.publicKey,free:x,total:j}),b[O].push({market:null===g||void 0===g?void 0:g.market.publicKey,free:A,total:T})}}catch(C){v.e(C)}finally{v.f()}return b}(),r=(e||[]).map((function(e){var r,a={coin:t[e.mint],mint:e.mint,walletBalance:e.balance,openOrdersFree:0,openOrdersTotal:0},o=Object(d.a)(n[e.mint]||[]);try{for(o.s();!(r=o.n()).done;){var c=r.value;a.openOrdersFree+=c.free,a.openOrdersTotal+=c.total}}catch(i){o.e(i)}finally{o.f()}return a}));return a.a.createElement(qt,{style:{flex:1,paddingTop:10}},a.a.createElement(mn.a,{defaultActiveKey:"walletBalances"},a.a.createElement(lr,{tab:"Wallet Balances",key:"walletBalances"},a.a.createElement(ur,{walletBalances:r}))))}var dr=n(466),fr=n(484),pr=n(105),mr=n(474),br=n(260),vr=n.n(br),hr=n(473),gr=a.a.createContext(null);function kr(e){var t=e.children,n=x("autoSettleEnabled",!0),r=Object(s.a)(n,2),o=r[0],c=r[1],i=mt(),d=Object(s.a)(i,1)[0],f=oe(),p=f.connected,m=f.wallet,b=et(it().customMarkets),v=Object(s.a)(b,1)[0],h=U(),g=ct(),k=Object(s.a)(g,1)[0];return Rt((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(v||[]).map((function(e){return e.market})),e.prev=1,console.log("Auto settling"),e.next=5,ve({connection:h,wallet:m,tokenAccounts:d||[],markets:t,selectedTokenAccounts:k});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Error auto settling funds: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();p&&(null===m||void 0===m?void 0:m.autoApprove)&&o&&e()}),1e4),a.a.createElement(gr.Provider,{value:{autoSettleEnabled:o,setAutoSettleEnabled:c}},t)}var yr=Bt.a.Paragraph;function Er(e){var t=e.autoApprove,n=function(){var e=Object(r.useContext)(gr);if(!e)throw new Error("Missing preferences context");return{autoSettleEnabled:e.autoSettleEnabled,setAutoSettleEnabled:e.setAutoSettleEnabled}}(),o=n.autoSettleEnabled,c=n.setAutoSettleEnabled;return a.a.createElement("div",null,a.a.createElement(hr.a,{style:{marginRight:10},disabled:!t,checked:t&&o,onChange:c})," ","Auto settle",!t&&a.a.createElement(yr,{style:{color:"rgba(255,255,255,0.5)",marginTop:10}},"To use auto settle, first enable auto approval in your wallet"))}function Or(e){var t=e.visible,n=e.testingConnection,o=e.onAddCustomEndpoint,c=e.onClose,i=Object(r.useState)(""),u=Object(s.a)(i,2),l=u[0],d=u[1],f=Object(r.useState)(""),p=Object(s.a)(f,2),m=p[0],b=p[1],v=function(){d(""),b(""),c&&c()},h=""!==l&&""!==m;return a.a.createElement(En.a,{title:"Add custom endpoint",visible:t,onOk:function(){o({name:m,endpoint:"https://"+l,custom:!0}),v()},okText:"Add",onCancel:v,okButtonProps:{disabled:!h,loading:n}},a.a.createElement(It.a,{style:{marginBottom:8}},a.a.createElement(Pt.a,{span:24},a.a.createElement(Rn.a,{placeholder:"Cluster Name",value:m,onChange:function(e){return b(e.target.value)}}))),a.a.createElement(It.a,{style:{marginBottom:8}},a.a.createElement(Pt.a,{span:24},a.a.createElement(Rn.a,{placeholder:"Cluster Endpoint",value:l,addonBefore:"https://",onChange:function(e){return d(e.target.value)}}))))}var wr=n(481),xr=n(482),jr=n(483),Sr=n(480);function Ar(e){var t=e.title,n=e.address;return a.a.createElement("div",null,t&&a.a.createElement("p",{style:{color:"white"}},t),a.a.createElement(rn.a,{type:"link",icon:a.a.createElement(Sr.a,null),href:"https://explorer.solana.com/address/"+n,target:"_blank",rel:"noopener noreferrer"},n))}function Tr(){var e,t=oe(),n=t.connected,r=t.wallet,o=null===r||void 0===r||null===(e=r.publicKey)||void 0===e?void 0:e.toBase58();return a.a.createElement(a.a.Fragment,null,a.a.createElement(rn.a,{ghost:!0,type:"text",size:"large",onClick:n?r.disconnect:r.connect,style:{color:"white"}},n?a.a.createElement(xr.a,null):a.a.createElement(wr.a,null),n?"Disconnect":"Connect wallet"),n&&a.a.createElement(mr.a,{content:a.a.createElement(Ar,{address:o}),placement:"bottomRight",title:"Wallet public key",trigger:"click"},a.a.createElement(jr.a,{style:{color:"white"}})))}function Cr(){var e=Object(wt.a)(["\n  display: flex;\n  align-items: center;\n  color: #2abdd2;\n  font-weight: bold;\n  cursor: pointer;\n  img {\n    height: 60px;\n    margin: 10px;\n  }\n"]);return Cr=function(){return e},e}function Br(){var e=Object(wt.a)(["\n  background: #000;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  padding: 0px 30px;\n  flex-wrap: wrap;\n"]);return Br=function(){return e},e}var Mr=xt.c.div(Br()),Nr=xt.c.div(Cr());function zr(){var e=oe(),t=e.connected,n=e.wallet,o=e.providerUrl,c=e.setProvider,i=H(),u=i.endpoint,l=i.endpointInfo,d=i.setEndpoint,p=i.availableEndpoints,m=i.setCustomEndpoints,b=Object(r.useState)(!1),v=Object(s.a)(b,2),h=v[0],g=v[1],k=Object(r.useState)(!1),y=Object(s.a)(k,2),E=y[0],O=y[1],w=Object(zt.f)(),x=Object(zt.e)(),j=Object(r.useCallback)((function(e){x.push(e.key)}),[x]),A=l&&l.custom;return Object(r.useEffect)((function(){var e=function(){A&&d(q[0].endpoint)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[A,d]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Or,{visible:h,testingConnection:E,onAddCustomEndpoint:function(e){if(p.some((function(t){return t.endpoint===e.endpoint})))te({message:"An endpoint with the given url already exists",type:"error"});else{var t=function(t){console.log("Connection to ".concat(e.endpoint," failed: ").concat(t)),te({message:"Failed to connect to ".concat(e.endpoint),type:"error"})};try{new f.b(e.endpoint,"recent").getEpochInfo().then((function(t){O(!0),console.log("testing connection to ".concat(e.endpoint));var n=[].concat(Object(S.a)(p.filter((function(e){return e.custom}))),[e]);d(e.endpoint),m(n)})).catch(t)}catch(n){t(n)}finally{O(!1)}}},onClose:function(){return g(!1)}}),a.a.createElement(Mr,null,a.a.createElement(Nr,null,a.a.createElement("img",{src:vr.a,alt:"",onClick:function(){return x.push("/")}})),a.a.createElement(pr.a,{mode:"horizontal",onClick:j,selectedKeys:[w.pathname],style:{borderBottom:"none",backgroundColor:"transparent",display:"flex",alignItems:"flex-end",flex:1}},a.a.createElement(pr.a.Item,{key:"/"},"Home"),t&&a.a.createElement(pr.a.Item,{key:"/balances"},"BALANCES"),t&&a.a.createElement(pr.a.Item,{key:"/orders"},"ORDERS")),a.a.createElement("div",null,a.a.createElement(It.a,{align:"middle",style:{paddingLeft:5,paddingRight:5},gutter:16},a.a.createElement(Pt.a,null,a.a.createElement(wn.a,{onSelect:d,value:u,style:{marginRight:8,width:"150px"}},p.map((function(e){var t=e.name,n=e.endpoint;return a.a.createElement(wn.a.Option,{value:n,key:n},t)})))))),t&&a.a.createElement("div",null,a.a.createElement(mr.a,{content:a.a.createElement(Er,{autoApprove:null===n||void 0===n?void 0:n.autoApprove}),placement:"bottomRight",title:"Settings",trigger:"click"},a.a.createElement(rn.a,{style:{marginRight:8}},a.a.createElement(fr.a,null),"Settings"))),a.a.createElement("div",null,a.a.createElement(wn.a,{onSelect:c,value:o},ne.map((function(e){var t=e.name,n=e.url;return a.a.createElement(wn.a.Option,{value:n,key:n},t)})))),a.a.createElement("div",null,a.a.createElement(Tr,null))))}var Pr=n(232),Ir=dr.a.Footer,Rr=Pr.a.useBreakpoint,Fr=[{description:"Bonfida",link:"https://bonfida.com"},{description:"Twitter",link:"https://twitter.com/bonfidadotcom"}],Kr=function(){var e=!Rr().lg;return a.a.createElement(Ir,{style:{height:"45px",paddingBottom:10,paddingTop:10}},a.a.createElement(It.a,{align:"middle",gutter:[16,4]},!e&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Pt.a,{flex:"auto"}),Fr.map((function(e,t){return a.a.createElement(Pt.a,{key:t+""},a.a.createElement(ee,{external:!0,to:e.link},e.description))})),a.a.createElement(Pt.a,{flex:"auto"}))))},qr=dr.a.Header,_r=dr.a.Content;function Lr(e){var t=e.children;return a.a.createElement(a.a.Fragment,null,a.a.createElement(dr.a,{style:{display:"flex",minHeight:"100vh",flexDirection:"column"}},a.a.createElement(qr,{style:{padding:0,minHeight:64,height:"unset"}},a.a.createElement(zr,null)),a.a.createElement(_r,{style:{flex:1}},t),a.a.createElement(Kr,null)))}function Dr(){var e=Object(wt.a)(["\n  padding: 30px;\n"]);return Dr=function(){return e},e}var Ur=Object(xt.c)(Pt.a)(Dr()),Wr=function(e){var t=e.start,n=e.end;return a.a.createElement(It.a,{align:"middle",justify:"center"},a.a.createElement(Pt.a,{flex:"auto"}),Qe.slice(t,n).map((function(e,t){return a.a.createElement(Ur,null,a.a.createElement($n,{key:t,img:e.img,name:e.name,supply:e.supply,mintAddress:e.mintAddress,sold:e.sold,marketAddress:e.marketAddress}))})),a.a.createElement(Pt.a,{flex:"auto"}))},Hr=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Wr,{start:0,end:3}),a.a.createElement(Wr,{start:3,end:6}),a.a.createElement(Wr,{start:6,end:9}),a.a.createElement(Wr,{start:9,end:10}))};function Gr(){return a.a.createElement(a.a.Fragment,null,a.a.createElement($.a,{basename:"/"},a.a.createElement(Lr,null,a.a.createElement(zt.a,{exact:!0,path:"/",component:Hr}),a.a.createElement(zt.a,{exact:!0,path:"/trade",component:rr}),a.a.createElement(zt.a,{exact:!0,path:"/orders",component:ir}),a.a.createElement(zt.a,{exact:!0,path:"/balances",component:sr}))))}function Jr(){return a.a.createElement(r.Suspense,{fallback:function(){return a.a.createElement(At.a,{size:"large"})}},a.a.createElement(St,null),a.a.createElement(Nt,null,a.a.createElement(D,null,a.a.createElement(ot,null,a.a.createElement(ae,null,a.a.createElement(kr,null,a.a.createElement(r.Suspense,{fallback:function(){return a.a.createElement(At.a,{size:"large"})}},a.a.createElement(Gr,null))))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Jr,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[269,1,2]]]);
//# sourceMappingURL=main.96eba133.chunk.js.map